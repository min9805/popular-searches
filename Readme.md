# 실시간 검색어 순위 서비스

## 문제상황

요새 큰 성장세를 기록하고 있는 HCS 라는 웹사이트가 있습니다. **사용자 수**가 계속해서 늘어나면서 **서비스 확대 및 개선**에 대한 needs가 다양하고 강력해지고 있습니다.
사용자들의 의견을 수용하기 위해 웹사이트를 통해 다양한 아이디어를 접수하고 있습니다.
사용자는 웹사이트에 자신의 아이디어 내용을 등록할 수 있고, 자신과 동일한 아이디어가 있는지도 검색이 가능합니다.
경영진과 개발팀은 사용자의 관심도가 높은 주제에 더 쉽게 접근할 수 있으면 좋겠다고 생각하고 있습니다.

## 해결 방안

1.사용자들이 검색한 키워드를 입력 받아서 데이터를 정제하고, 2.**요청이 있을 때** 전체 검색어 중 제일 많이 검색된 실시간 순위 Top 10을 제공하는 **마이크로 서비스**를 만들려고 합니다.
(주의사항) **해당 서비스는 검색을 직접 수행하지는 않습니다. 검색한 키워드만 입력 받아 실시간 순위를 제공하는 서비스입니다.**

## Elastic Search

실제 검색 과정이라면 검색 후 결과까지 반환해야합니다.
검색과 실시간 순위를 반영하기 위해서는 Elastic Search 를 사용할 수 있습니다.

- 검색

- 실시간 순위

해당 과제에서는 "검색을 직접 수행하지는 않습니다. 검색한 키워드만 입력 받아 실시간 순위를 제공하는 서비스입니다." 라는 조건이 있습니다.
해당 조건으로 인해 실제 검색 구현을 생략하게 되었습니다.

## 1. Redis

실시간성 성격을 띄고 있기 때문에 캐시를 적용하였습니다. Redis 의 sorted set 구조를 사용하였습니다.

### Sorted Set

Redis에서 제공해주는 자료구조 중 하나인 Sorted Set(또는 ZSET)은 Set의 특성을 그대로 가지면서 추가적으로 저장된 value들의 순서도 관리해줍니다.
이 때 이 순서를 위해 각 value에 대해 score를 필요에 맞게 설정할 수 있으며, 이 score를 기반으로 정렬을 수행합니다.

- key: `search_rank`
- value: `keyword`
- score: `count`
- score 는 count 를 기준으로 정렬합니다.

- search API 를 통해 검색어를 받아오면 해당 검색어를 sorted set 에 추가하거나 Score 를 증가시킵니다.
- search_rank 에서 Score 기준 상위 10개의 검색어를 가져옵니다.

## 2. MySQL, MongoDB, Elastic Search

- Redis 를 사용한다면 단순 검색어 순위를 제공할 수 있지만 시간에 따른 정보를 제공하기 어렵습니다.
- 이를 보완하기 위해 DB 에 과거의 검색어 순위를 저장해 사용할 수 있습니다.

# 진행하면서 고민되었던 점

# 진행하면서 아쉬웠던 점

# 해당 서비스를 고도화 한다면?